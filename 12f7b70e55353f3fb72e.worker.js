!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/pc-pcm-wave/",e(e.s="EIFZ")}({EIFZ:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t){return Math.exp(-t/2*t/2)}function a(t){return function(e){return function(t){if(0===t)return 1;return Math.sin(Math.PI*t)/(Math.PI*t)}(e)*t(e)}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){for(var i=0,r=e.length;i<r;i++)e[i]=n.interpolate(i,t)}function l(t,e,n,i){for(var r=0,a=e.length;r<a;r++)e[r]=i.filter(n.interpolate(r,t));i.reset();for(var s=e.length-1;s>=0;s--)e[s]=i.filter(e[s])}function h(t,e,n,i){for(var r=0,a=t.length;r<a;r++)t[r]=i.filter(t[r]);i.reset();for(var s=t.length-1;s>=0;s--)t[s]=i.filter(t[s]);u(t,e,n)}function f(t){for(var e=new Float32Array(t.length*t[0].length),n=0,i=0;i<t.length;i++)e.set(t[i],n),n+=t[i].length;return e}function c(t,e,n){for(var i=n.length,r=0;r<i;r++)t.setUint8(e+r,n.charCodeAt(r))}n.r(e);var p=function(){function t(t,e,n){this.length_=t,this.scaleFactor_=(t-1)/e,this.interpolate=this.cubic,"point"===n.method?this.interpolate=this.point:"linear"===n.method?this.interpolate=this.linear:"sinc"===n.method&&(this.interpolate=this.sinc),this.tangentFactor_=1-Math.max(0,Math.min(1,n.tension||0)),this.sincFilterSize_=n.sincFilterSize||1,this.kernel_=a(n.sincWindow||r)}var e,n,s;return e=t,(n=[{key:"point",value:function(t,e){return this.getClippedInput_(Math.round(this.scaleFactor_*t),e)}},{key:"linear",value:function(t,e){t*=this.scaleFactor_;var n=Math.floor(t);return(1-(t-=n))*this.getClippedInput_(n,e)+t*this.getClippedInput_(n+1,e)}},{key:"cubic",value:function(t,e){t*=this.scaleFactor_;var n=Math.floor(t),i=[this.getTangent_(n,e),this.getTangent_(n+1,e)],r=[this.getClippedInput_(n,e),this.getClippedInput_(n+1,e)],a=(t-=n)*t,s=t*a;return(2*s-3*a+1)*r[0]+(s-2*a+t)*i[0]+(-2*s+3*a)*r[1]+(s-a)*i[1]}},{key:"sinc",value:function(t,e){t*=this.scaleFactor_;for(var n=Math.floor(t),i=n+this.sincFilterSize_,r=0,a=n-this.sincFilterSize_+1;a<=i;a++)r+=this.kernel_(t-a)*this.getClippedInput_(a,e);return r}},{key:"getTangent_",value:function(t,e){return this.tangentFactor_*(this.getClippedInput_(t+1,e)-this.getClippedInput_(t-1,e))/2}},{key:"getClippedInput_",value:function(t,e){return 0<=t&&t<this.length_?e[t]:0}}])&&i(e.prototype,n),s&&i(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}(),g=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=2*Math.PI*i/n,a=0;this.filters=[];for(var s=0;s<=e;s++)s-e/2==0?this.filters[s]=r:(this.filters[s]=Math.sin(r*(s-e/2))/(s-e/2),this.filters[s]*=.54-.46*Math.cos(2*Math.PI*s/e)),a+=this.filters[s];for(var o=0;o<=e;o++)this.filters[o]/=a;this.z=this.initZ_()}var e,n,i;return e=t,(n=[{key:"filter",value:function(t){this.z.buf[this.z.pointer]=t;for(var e=0,n=0,i=this.z.buf.length;n<i;n++)e+=this.filters[n]*this.z.buf[(this.z.pointer+n)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,e}},{key:"reset",value:function(){this.z=this.initZ_()}},{key:"initZ_",value:function(){for(var t=[],e=0;e<this.filters.length-1;e++)t.push(0);return{buf:t,pointer:0}}}])&&s(e.prototype,n),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),v={point:!1,linear:!1,cubic:!0,sinc:!0},b={IIR:16,FIR:71},d={IIR:function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=[],a=0;a<e;a++)r.push(this.getCoeffs_({Fs:n,Fc:i,Q:.5/Math.sin(Math.PI/(2*e)*(a+.5))}));this.stages=[];for(var s=0;s<r.length;s++)this.stages[s]={b0:r[s].b[0],b1:r[s].b[1],b2:r[s].b[2],a1:r[s].a[0],a2:r[s].a[1],k:r[s].k,z:[0,0]}}var e,n,i;return e=t,(n=[{key:"filter",value:function(t){for(var e=t,n=0,i=this.stages.length;n<i;n++)e=this.runStage_(n,e);return e}},{key:"getCoeffs_",value:function(t){var e={z:[0,0],a:[],b:[]},n=this.preCalc_(t,e);return e.k=1,e.b.push((1-n.cw)/(2*n.a0)),e.b.push(2*e.b[0]),e.b.push(e.b[0]),e}},{key:"preCalc_",value:function(t,e){var n={},i=2*Math.PI*t.Fc/t.Fs;return n.alpha=Math.sin(i)/(2*t.Q),n.cw=Math.cos(i),n.a0=1+n.alpha,e.a0=n.a0,e.a.push(-2*n.cw/n.a0),e.k=1,e.a.push((1-n.alpha)/n.a0),n}},{key:"runStage_",value:function(t,e){var n=e*this.stages[t].k-this.stages[t].a1*this.stages[t].z[0]-this.stages[t].a2*this.stages[t].z[1],i=this.stages[t].b0*n+this.stages[t].b1*this.stages[t].z[0]+this.stages[t].b2*this.stages[t].z[1];return this.stages[t].z[1]=this.stages[t].z[0],this.stages[t].z[0]=n,i}},{key:"reset",value:function(){for(var t=0;t<this.stages.length;t++)this.stages[t].z=[0,0]}}])&&o(e.prototype,n),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),FIR:g},y=function(t){for(var e=0,n=[],i=t.length,r=0;r<i;r++)e+=Math.pow(t[r],2),(r+1)%256==0?(n.push(e),e=0):r===i-1&&n.push(e);return n};self.addEventListener("message",(function(t){var e=t.data,n=e.type,i=e.audioBuffers,r=e.inputSampleRate,a=e.outputSampleRate;if("short-energy"===n&&self.postMessage(y(f(i))),"wav"===n){var s=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=new Float64Array(t.length*((n-e)/e+1));i.method=i.method||"cubic";var a=new p(t.length,r.length,{method:i.method,tension:i.tension||0,sincFilterSize:i.sincFilterSize||6,sincWindow:i.sincWindow||void 0});if(void 0===i.LPF&&(i.LPF=v[i.method]),i.LPF){i.LPFType=i.LPFType||"IIR";var s=d[i.LPFType];if(n>e)l(t,r,a,new s(i.LPFOrder||b[i.LPFType],n,e/2));else h(t,r,a,new s(i.LPFOrder||b[i.LPFType],e,n/2))}else u(t,r,a);return r}(f(i),r,a);self.postMessage(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:44100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=new ArrayBuffer(2*t.length+44),r=new DataView(i);c(r,0,"RIFF"),r.setUint32(4,44+2*t.length,!0),c(r,8,"WAVE"),c(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,n,!0),r.setUint32(24,e,!0),r.setUint32(28,2*e,!0),r.setUint16(32,2*n,!0),r.setUint16(34,16,!0),c(r,36,"data"),r.setUint32(40,2*t.length,!0);for(var a=44,s=1,o=t.length,u=0;u<o;u++)r.setInt16(a,t[u]*(32767*s),!0),a+=2;return i}(s,a))}}))}});
//# sourceMappingURL=12f7b70e55353f3fb72e.worker.js.map